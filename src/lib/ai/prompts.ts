/**
 * Prompt templates for AI features
 */

import { type DigestTasksInput } from "./types";

/**
 * Prompt for generating task details from title
 */
export function buildTaskGenerationPrompt(title: string): string {
  return `–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á. –ù–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–µ—Ç–∞–ª–∏.

–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏: "${title}"

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π:
1. description - —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º)
2. priority - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (LOW –¥–ª—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, MEDIUM –¥–ª—è –æ–±—ã—á–Ω—ã—Ö, HIGH –¥–ª—è –≤–∞–∂–Ω—ã—Ö, URGENT –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö/–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö)
3. deadlineDays - —á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –¥–µ–¥–ª–∞–π–Ω (—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 30)

–û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–º JSON –±–µ–∑ markdown:
{"description": "...", "priority": "MEDIUM", "deadlineDays": 7}`;
}

/**
 * Prompt for generating daily digest
 */
export function buildDigestPrompt(data: DigestTasksInput): string {
  const today = new Date().toLocaleDateString("ru-RU", {
    weekday: "long",
    day: "numeric",
    month: "long",
  });

  return `–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–¥–∞—á–∏ –∏ —Å–æ—Å—Ç–∞–≤—å –∫—Ä–∞—Ç–∫–∏–π –ø–ª–∞–Ω.

–°–µ–≥–æ–¥–Ω—è: ${today}

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞—á:
- –í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö: ${data.total}
- –ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é (TODO): ${data.todo}
- –í —Ä–∞–±–æ—Ç–µ: ${data.inProgress}
- –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ: ${data.review}
- –í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${data.done}
- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö: ${data.overdue}

–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:
${data.tasksList || "–ù–µ—Ç –∑–∞–¥–∞—á"}

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–ª–∞–Ω –¥–Ω—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

## üéØ –ü–ª–∞–Ω –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
[2-3 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–æ–∏—Ç –Ω–∞—á–∞—Ç—å, —Å –∫—Ä–∞—Ç–∫–∏–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º]

## ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ
[–ó–∞–¥–∞—á–∏ —Å –±–ª–∏–∑–∫–∏–º–∏ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å]

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
[1 –∫–æ—Ä–æ—Ç–∫–∏–π —Å–æ–≤–µ—Ç –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã]

–ë—É–¥—å –∫—Ä–∞—Ç–∫–∏–º –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º. –ù–µ –±–æ–ª–µ–µ 200 —Å–ª–æ–≤.`;
}

/**
 * System prompt for universal AI assistant chat
 */
export function buildAssistantSystemPrompt(context: {
  userName?: string;
  projectsCount?: number;
  tasksContext?: string;
}): string {
  const today = new Date().toLocaleDateString("ru-RU", {
    weekday: "long",
    day: "numeric",
    month: "long",
  });

  return `–¢—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–¥–∞—á. –¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∑–∞–¥–∞—á.

–ö–û–ù–¢–ï–ö–°–¢:
- –°–µ–≥–æ–¥–Ω—è: ${today}
${context.userName ? `- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${context.userName}` : ""}
${context.projectsCount !== undefined ? `- –ü—Ä–æ–µ–∫—Ç–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${context.projectsCount}` : ""}
${context.tasksContext ? `\n–ó–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n${context.tasksContext}` : ""}

–ß–¢–û –¢–´ –£–ú–ï–ï–®–¨:
1. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç** ‚Äî –ø–æ–º–æ–≥–∏ —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –∑–∞–¥–∞—á–∞–º–∏, —É—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª–∏ –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π
2. **–ü–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å** ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–¥–∞—á–∏ –∏ —Å–æ—Å—Ç–∞–≤—å –ø–ª–∞–Ω –¥–Ω—è
3. **–°–æ–≤–µ—Ç—ã** ‚Äî –ø–æ–º–æ–≥–∏ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –æ—Ü–µ–Ω–∏—Ç—å —Å—Ä–æ–∫–∏
4. **–û—Ç–≤–µ—Ç—ã** ‚Äî –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü–†–ê–í–ò–õ–ê:
- –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É, –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π

–°–û–ó–î–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê:
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ —Ç—ã —Å–æ–±—Ä–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ—Ç–≤–µ—Ç—å —Ñ–æ—Ä–º–∞—Ç–æ–º:

\`\`\`json
{
  "action": "CREATE_PROJECT",
  "project": {
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
    "description": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
  },
  "tasks": [
    {
      "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
      "priority": "MEDIUM",
      "deadlineDays": 7
    }
  ]
}
\`\`\`

- priority: LOW | MEDIUM | HIGH | URGENT
- deadlineDays: 1-90 –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è
- –ù–µ –±–æ–ª—å—à–µ 10 –∑–∞–¥–∞—á –∑–∞ —Ä–∞–∑
- –°–æ–∑–¥–∞–≤–∞–π —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –ª–æ–≥–∏—á–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é`;
}

